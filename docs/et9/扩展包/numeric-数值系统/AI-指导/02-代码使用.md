# Numeric 数值系统 - 代码使用

> 本文档介绍 Numeric 数值系统的各种使用方法，向 AI 咨询时可参考此文档

## 目录

1. [基础用法](./01-入门.md) - 组件添加和基本操作
2. [数值操作](./02-数值操作.md) - 获取/设置数值
3. [数值监听](./03-数值监听.md) - 监听数值变化
4. [战斗数值](./04-战斗数值.md) - 攻击/防御/伤害计算
5. [属性数值](./05-属性数值.md) - 速度/暴击等属性
6. [数值上限](./06-数值上限.md) - 最大值限制
7. [GM调试](./07-GM调试.md) - GM 命令和调试

---

## 2. 数值操作

### 获取数值

```csharp
// 获取整数值
numericComponent.GetValue(NumericType.HP);

// 获取浮点值
numericComponent.GetValueAsFloat(NumericType.CriDamage);

// 获取最终值（含加成）
numericComponent.GetFinalValue(NumericType.Attack);
```

### 设置数值

```csharp
// 设置绝对值
numericComponent.SetValue(NumericType.HP, 1000);

// 增加数值
numericComponent.SetValue(NumericType.HP, +100);

// 减少数值
numericComponent.SetValue(NumericType.HP, -100);
```

---

## 3. 数值监听

### 监听单个数值

```csharp
// 添加监听
numericComponent.AddNumericChangedListener(NumericType.HP, OnHPChanged);

// 移除监听
numericComponent.RemoveNumericChangedListener(NumericType.HP, OnHPChanged);

// 回调
void OnHPChanged(long oldValue, long newValue) { }
```

### 监听多个数值

```csharp
// 批量监听
numericComponent.AddNumericChangedListener(new[] { NumericType.HP, NumericType.MP }, OnValueChanged);
```

---

## 4. 战斗数值

### 伤害计算

```csharp
// 基础伤害 = 攻击 - 防御 * 系数
var damage = attacker.Atk - defender.Def * 0.5f;

// 最终伤害
damage = damage * (1 + critBonus);
```

### 暴击判断

```csharp
// 暴击率判定
var isCrit = RandomHelper.RandomFloat() < attacker.GetValueAsFloat(NumericType.CriRate);

// 暴击伤害
var critDamage = attacker.GetValueAsFloat(NumericType.CriDamage);
```

---

## 5. 属性数值

### 速度相关

```csharp
// 移动速度
var moveSpeed = numericComponent.GetValueAsFloat(NumericType.MoveSpeed);

// 攻击速度
var atkSpeed = numericComponent.GetValueAsFloat(NumericType.AtkSpeed);
```

### 防御相关

```csharp
// 防御
var def = numericComponent.GetValue(NumericType.Def);

// 减伤
var reduction = numericComponent.GetValueAsFloat(NumericType.DamageReduction);
```

---

## 6. 数值上限

### 设置最大值

```csharp
// 设置最大值
numericComponent.SetMaxValue(NumericType.HP, maxHP);

// 获取最大值
var maxHP = numericComponent.GetMaxValue(NumericType.HP);
```

### 限制范围

```csharp
// 限制数值范围
numericComponent.ClampValue(NumericType.HP, 0, maxHP);
```

---

## 7. GM调试

### 数值修改

```csharp
// GM 命令修改数值
numericComponent.SetValue(NumericType.Level, 100);
numericComponent.SetValue(NumericType.Gold, 999999);
```

### 属性查看

```csharp
// 打印所有属性
numericComponent.DumpValues();
```
