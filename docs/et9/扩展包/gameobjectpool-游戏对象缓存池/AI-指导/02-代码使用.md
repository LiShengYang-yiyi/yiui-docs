# GameObjectPool 游戏对象缓存池 - 代码使用

> 本文档介绍对象池系统的各种使用方法，向 AI 咨询时可参考此文档

## 目录

1. [基础用法](./01-入门.md) - 初始化和基本操作
2. [对象获取](./02-对象获取.md) - Get 方法详解
3. [对象回收](./03-对象回收.md) - Recycle 方法详解
4. [批量操作](./04-批量操作.md) - 批量获取/回收
5. [池管理](./05-池管理.md) - 池配置和管理
6. [生命周期](./06-生命周期.md) - 对象的创建和销毁

---

## 2. 对象获取

### 基础获取

```csharp
// 异步获取（推荐）
var obj = await YIUIGameObjectPool.Instance.Get(prefabPath);
```

### 同步获取

```csharp
// 同步获取
var obj = YIUIGameObjectPool.Instance.GetSync(prefabPath);
```

### 指定父节点

```csharp
// 指定父节点
var obj = await YIUIGameObjectPool.Instance.Get(prefabPath, parent);

// 指定位置
var obj = await YIUIGameObjectPool.Instance.Get(prefabPath, parent, position);
```

---

## 3. 对象回收

### 基础回收

```csharp
// 回收对象
YIUIGameObjectPool.Instance.Recycle(obj);
```

### 指定池回收

```csharp
// 回收到指定池
YIUIGameObjectPool.Instance.Recycle(obj, poolName);
```

### 带回调回收

```csharp
// 回收时执行回调
YIUIGameObjectPool.Instance.Recycle(obj, OnRecycle);

void OnRecycle(GameObject obj) { }
```

---

## 4. 批量操作

### 批量获取

```csharp
// 批量获取
var objs = await YIUIGameObjectPool.Instance.GetBatch(prefabPath, count);
```

### 批量回收

```csharp
// 批量回收
YIUIGameObjectPool.Instance.RecycleBatch(objs);
```

---

## 5. 池管理

### 预加载

```csharp
// 预加载对象
YIUIGameObjectPool.Instance.Preload(prefabPath, count);
```

### 清理池

```csharp
// 清理指定池
YIUIGameObjectPool.Instance.Clear(poolName);

// 清理所有
YIUIGameObjectPool.Instance.ClearAll();
```

### 池状态

```csharp
// 获取池状态
var count = YIUIGameObjectPool.Instance.GetPoolCount(poolName);
```

---

## 6. 生命周期

### 创建回调

```csharp
// 对象创建时回调
YIUIGameObjectPool.Instance.SetCreateCallback(prefabPath, OnCreate);

GameObject OnCreate() { return Instantiate(prefab); }
```

### 获取回调

```csharp
// 对象取出时回调
YIUIGameObjectPool.Instance.SetSpawnCallback(prefabPath, OnSpawn);

void OnSpawn(GameObject obj) { }
```

### 回收回调

```csharp
// 对象回收时回调
YIUIGameObjectPool.Instance.SetDespawnCallback(prefabPath, OnDespawn);

void OnDespawn(GameObject obj) { }
```
