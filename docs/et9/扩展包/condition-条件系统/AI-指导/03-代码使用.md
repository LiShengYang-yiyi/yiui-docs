# Condition 条件系统 - 代码使用

> 本文档介绍 Condition 系统的各种使用方法，向 AI 咨询时可参考此文档

## 目录

1. [基础用法](./01-入门.md) - 初始化和基本检查
2. [配置使用](./02-配置.md) - 配置表相关操作
3. [条件检查](./03-条件检查.md) - 执行条件检查
4. [自定义条件](./04-自定义条件.md) - 创建自定义条件类型
5. [条件组合](./05-条件组合.md) - 与/或/非条件
6. [监听变化](./06-监听变化.md) - 条件变化监听
7. [实际应用](./07-实际应用.md) - 功能解锁/任务/红点

---

## 3. 条件检查

### 同步检查

```csharp
// 检查单个条件
scene.CheckCondition(conditionId);

// 检查条件组
scene.CheckConditionGroup(groupId, requireAll);
```

### 异步检查

```csharp
// 异步检查
await scene.CheckConditionAsync(conditionId);
```

### 带参数检查

```csharp
// 带额外参数检查
scene.CheckCondition(conditionId, param1, param2);
```

---

## 4. 自定义条件

### 创建条件类

```csharp
[Condition("类型名")]
public class CustomCondition : ICondition
{
    public bool Check(long entityId, string param1, string param2, string param3)
    {
        // 实现检查逻辑
    }
}
```

### 常用条件类型

```csharp
// 等级条件
[Condition("Level")]
// 物品条件
[Condition("Item")]
// 任务条件
[Condition("Task")]
// 数值条件
[Condition("Numeric")]
```

---

## 5. 条件组合

### And 条件（与）

```csharp
// 所有条件都满足
[Condition("And")]
public class AndCondition : ICondition { }
```

### Or 条件（或）

```csharp
// 任一条件满足
[Condition("Or")]
public class OrCondition : ICondition { }
```

### Not 条件（非）

```csharp
// 条件取反
[Condition("Not")]
public class NotCondition : ICondition { }
```

---

## 6. 监听变化

### 订阅条件变化

```csharp
// 订阅
conditionMgr.Subscribe(conditionId, OnConditionChanged);

// 取消订阅
conditionMgr.Unsubscribe(conditionId, OnConditionChanged);

// 回调
void OnConditionChanged(bool result) { }
```

### 全局监听

```csharp
// 监听所有条件变化
scene.RegisterConditionChangeHandler(handler);
```

---

## 7. 实际应用

### 功能解锁

```csharp
// 检查功能是否解锁
scene.CheckCondition(FeatureUnlockConditionId);
```

### 任务系统

```csharp
// 检查任务前置条件
scene.CheckCondition(taskPreConditionId);

// 检查任务完成条件
scene.CheckCondition(taskCompleteConditionId);
```

### 红点系统

```csharp
// 检查红点显示条件
scene.CheckCondition(redDotConditionId);
```

### 排行榜

```csharp
// 检查排行榜解锁条件
scene.CheckCondition(rankConditionId);
```
