# Condition 条件系统 - 配置指南

## Condition 表配置

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| Id | int | 条件 ID |
| ConditionType | string | 条件类型 |
| Param1 | string | 参数 1 |
| Param2 | string | 参数 2 |
| Param3 | string | 参数 3 |
| Desc | string | 描述 |

### 配置示例

```
| Id | ConditionType | Param1    | Param2 | Param3 | Desc          |
|----|--------------|-----------|--------|-----------|
| 1|------------  | Level        | 10        |        |        | 等级达到10    |
| 2  | TaskComplete | 1001      |        |        | 完成任务1001  |
| 3  | ItemHave     | 10001     | 10     |        | 拥有物品10个  |
```

## 自定义条件类型

### 创建自定义条件

```csharp
[Condition("CustomType")]
public class CustomCondition : ICondition
{
    public bool Check(long entityId, string param1, string param2, string param3)
    {
        // 自定义条件逻辑
        var value = int.Parse(param1);
        return entity.GetComponent<NumericComponent>().GetValue(NumericType.Level) >= value;
    }
}
```

### 条件组合（与/或）

```csharp
// 与条件 - 所有条件都满足
[Condition("And")]
public class AndCondition : ICondition
{
    public bool Check(long entityId, string param1, string param2, string param3)
    {
        // 解析条件组 ID
        var groupId = int.Parse(param1);
        return CheckAllConditions(entityId, groupId);
    }
}

// 或条件 - 任一条件满足
[Condition("Or")]
public class OrCondition : ICondition
{
    public bool Check(long entityId, string param1, string param2, string param3)
    {
        var groupId = int.Parse(param1);
        return CheckAnyCondition(entityId, groupId);
    }
}
```

## 进阶配置

### 条件组

```csharp
// 添加条件组
public void AddConditionGroup(int groupId, List<int> conditionIds)
{
    ConditionGroupCache[groupId] = conditionIds;
}

// 检查条件组
public async ETTask<bool> groupId, CheckConditionGroup(int bool requireAll = true)
{
    var ids = ConditionGroupCache[groupId];
    if (requireAll)
    {
        foreach (var id in ids)
        {
            if (!await CheckCondition(id)) return false;
        }
        return true;
    }
    else
    {
        foreach (var id in ids)
        {
            if (await CheckCondition(id)) return true;
        }
        return false;
    }
}
```

### 配置枚举自动生成

使用配置枚举自动生成可以：
1. 避免手动输入错误
2. 下拉选择条件类型
3. 快速添加条件

详见：[配置枚举自动生成](../配置枚举自动生成.md)
