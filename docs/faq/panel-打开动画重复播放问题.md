# Panel 打开动画重复播放问题

 
![Image](/images/CB5ewIAQZiBf1Ykp2DDcMj22nHb_0_81cbc665.png)
  
 1. 先打开了A 
 
 2. 然后打开B, 因为B打开时会触发A的关闭 
 这个关闭是系统缓存堆栈的关闭 只是隐藏了 并没有调用关闭API 
 
 3. 这个时候又调用A关闭 
 
 就会发现B有2次动画 
 原因是步骤2 的打开B 播放了一次动画 
 步骤3 关闭A的时候又触发了堆栈又播放了B的打开动画 所以看到了2次播放 
 
 解决方案 
 
 方案一 
 
![Image](/images/T4DxwmiNmileW3kVKOXcIMG2nGg_1_57e7016a.png)
 步骤3 关闭A的时候  关闭API传入  忽略打开 就不会调用B的打开动画 
 缺点: 关闭时要明确的知道有这个问题  要想到这么回事 才会主动的调用忽略其他 
 
 方案二 
 界面堆栈选项 使用 忽略 
 那么步骤2打开B的时候   A就会被调用关闭API 
 
![Image](/images/T4DxwmiNmileW3kVKOXcIMG2nGg_2_8296507c.png)
 缺点: 同样需要明确知道有这个问题后来修改这里 
 
 方案三 
 新版本 3.0.1+ 才有此功能 
 
 如果自己已经处于关闭状态 将不会调用 
 这个方案更直观 不用考虑辣么多  大多数情况都可以默认 如果当前已经关闭了 
 (这个关闭是因为其他界面打开 他被迫关闭 进入到堆栈这种情况) 
 如果已经在堆栈中 调用关闭 默认就不触发打开其他了 以及自己的各种动画了 
 注意:UI没有关闭状态 如果当前UI不是最前面的UI 则认为是被关闭了 
 
 如果不想要这个功能 可以在窗口选项中打开这个功能 
 (按经验来讲99.99% 都不可能打开这个功能) 
 
![Image](/images/T4DxwmiNmileW3kVKOXcIMG2nGg_3_1dc927a1.png)